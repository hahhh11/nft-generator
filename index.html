<!--
 * @Author: 98Precent
 * @Date: 2025-12-05 10:31:11
 * @LastEditors: Do not edit
 * @LastEditTime: 2025-12-05 11:53:11
 * @FilePath: /nft-generator/index.html
-->
<head>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFT 头像生成器</title>
    <!-- 引入 JSZip 库 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>


    <div class="container">
        <!-- 左侧：资源管理 -->
        <div class="left-panel">
            <div id="resourceManager">
                <div class="resource-header">
                    <h3>图层和资源</h3>
                    <!-- 设置按钮 -->
                    <button id="settingsBtn" class="settings-btn">⚙️ 设置</button>
                </div>
                
                <!-- 加载方式选择 -->
                <div class="load-method-selector">
                    <h4>加载方式:</h4>
                    <label>
                        <input type="radio" name="loadMethod" value="upload" checked> 上传文件
                    </label>
                    <label>
                        <input type="radio" name="loadMethod" value="path"> 路径拼接
                    </label>
                </div>
        
        <!-- 路径拼接配置 -->
        <div id="pathConfig" class="path-config" style="display: none;">
            <h4>路径拼接配置:</h4>
            <div class="path-input-group">
                <input type="text" id="pathPrefix" placeholder="路径前缀 (如: assets/)" class="path-input">
                <input type="text" id="filenameFormat" placeholder="文件名格式 (如: {layer}_{trait}.png)" class="path-input">
            </div>
            <p class="help-text">提示: 使用 {layer} 表示图层名，{trait} 表示特征名，系统会自动替换</p>
        </div>
                
                <p>请为每个图层 (例如: Background, Body, Eyes) 配置资源。</p>
                
                <div id="layerInputs">
            <div class="layer-group" data-layer-id="1">
                <input type="text" placeholder="图层名称 (如: Background)" class="layer-name" value="Background">
                <input type="file" class="layer-files" multiple accept="image/png">
                <input type="text" placeholder="特征列表 (如: red,blue,green)" class="trait-list">
                <button class="remove-layer" onclick="removeLayer(this)">移除</button>
            </div>
        </div>
                <button onclick="addLayer()">+ 添加新图层</button>
                <button id="loadResourcesBtn">2. 载入资源</button>
                <p id="statusMessage" style="color: green; margin-top: 10px;"></p>
            </div>
        </div>
        
        <!-- 右侧：NFT 效果 -->
        <div class="right-panel">
            <div class="nft-preview">
                <canvas id="nftCanvas" width="500" height="500"></canvas>
            </div>
            
            <div class="controls">
                <button id="generateBtn" disabled>随机生成头像</button>
                <button id="downloadBtn" disabled>下载 PNG</button>
                <button id="generateAllBtn" disabled>生成所有并下载</button>
            </div>
            
            <div class="attributes">
                <h3>当前特征:</h3>
                <ul id="traitList"></ul>
            </div>
        </div>
    </div>
    
    <!-- 模态框背景遮罩 -->
    <div id="modalOverlay" class="modal-overlay" style="display: none;"></div>
    
    <!-- 模态框设置面板 -->
    <div id="settingsPanel" class="settings-modal" style="display: none;">
        <div class="modal-header">
            <h3>设置</h3>
            <button id="closeModalBtn" class="close-modal-btn">×</button>
        </div>
        <div class="modal-content">
            <!-- 尺寸设置 -->
            <div id="sizeConfig" class="size-config">
                <h4>图片尺寸设置:</h4>
                <div class="size-input-group">
                    <input type="number" id="widthInput" placeholder="宽度 (像素)" class="size-input" value="500" min="100" max="2000">
                    <input type="number" id="heightInput" placeholder="高度 (像素)" class="size-input" value="500" min="100" max="2000">
                    <button id="applySizeBtn">应用尺寸</button>
                </div>
                <p class="help-text">提示: 建议使用正方形尺寸（如: 500x500, 800x800）以获得最佳效果</p>
            </div>
        </div>
    </div>
    
    <script src="generator.js"></script>
</body>
</html>